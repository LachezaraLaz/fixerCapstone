
<div align="center">
  <img src="https://skillicons.dev/icons?i=react,express,mongodb,jest,figma&perline=5" alt="Technology Used" title="Technology Used" />
  <img src="https://github.com/user-attachments/assets/482a8a51-4554-4ce2-89cb-19ebd0540f56" alt="expo" width="48" />
  <img src="https://github.com/user-attachments/assets/20bc70c7-1d8a-4e6e-a4e1-68832a376dce" alt="pino" width="50" />
  <img src="https://github.com/user-attachments/assets/124d7d43-eb55-4ec5-913f-956fdb787538" alt="better-stack" width="85" height="50"/>
  <img src="https://github.com/user-attachments/assets/7fc6a0fa-e1f9-428d-ae1f-cbd6ce642642" alt="moropo" width="50" />
</div>

Documentation: [jsDocs link](https://lachezaralaz.github.io/fixerCapstone/)

# Releases
## Release 1:
Video:
https://drive.google.com/file/d/1WhXXtFP5O8dtVwtxiwycaVndRdlPdeiS/view?usp=drive_link

Top 5 files:  
- [fixerClient/src/screens/createIssue/createIssue.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/fixerClient/src/screens/createIssue/createIssue.js)
- [fixerClient/src/NavBarComponent.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/fixerClient/src/NavBarComponent.js)
- [professionalClient/src/homeScreen.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/professionalClient/src/homeScreen.js)
- [professionalClient/src/screens/signin/signinPage.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/professionalClient/src/screens/signin/signinPage.js)
- [fixerClient/src/screens/editIssue/editIssue.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/fixerClient/src/screens/editIssue/editIssue.js)

Top 5 testing files:
- [fixerClient/src/screens/createIssue/__tests__/createIssue.test.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/fixerClient/src/screens/createIssue/__tests__/createIssue.test.js)
- [fixerClient/src/screens/signup/__tests__/signup.test.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/fixerClient/src/screens/signup/__tests__/signup.test.js)
- [fixerClient/src/screens/editIssue/__tests__/editIssue.test.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/fixerClient/src/screens/editIssue/__tests__/editIssue.test.js)
- [professionalClient/src/screens/map-view/__tests__/homeScreen.test.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/professionalClient/src/screens/map-view/__tests__/homeScreen.test.js)
- [professionalClient/src/screens/signin/__tests__/signin.test.js](https://github.com/LachezaraLaz/fixerCapstone/blob/050047e2e06fd3093f63c77b8b594be7aba24c32/professionalClient/src/screens/signin/__tests__/signin.test.js)

## Release 2:
Video:
https://drive.google.com/file/d/1Of85yiZN5_rXYTDKgvUCeXPkay1nanA8/view?usp=sharing

Top 5 files:
- [server/utils/logger.js](https://github.com/LachezaraLaz/fixerCapstone/blob/main/server/utils/logger.js)
- [fixerClient/src/screens/chat/chatContext.js](https://github.com/LachezaraLaz/fixerCapstone/blob/main/fixerClient/src/screens/chat/chatContext.js)
- [fixerClient/src/screens/OffersPage/OffersPage.js](https://github.com/LachezaraLaz/fixerCapstone/blob/main/fixerClient/src/screens/OffersPage/OffersPage.js)
- [professionalClient/App.js](https://github.com/LachezaraLaz/fixerCapstone/blob/main/professionalClient/App.js)
- [professionalClient/app.json](https://github.com/LachezaraLaz/fixerCapstone/blob/main/professionalClient/app.json)

Top 5 testing files:
- [fixerClient/src/screens/OffersPage/__tests__/OffersPage.test.js](https://github.com/LachezaraLaz/fixerCapstone/blob/Quote-testing/fixerClient/src/screens/OffersPage/__tests__/OffersPage.test.js)
- [.github/workflows/moropo_android.yaml](https://github.com/LachezaraLaz/fixerCapstone/blob/main/.github/workflows/moropo_android.yaml)
- [commit/b312ea2b1b43327be5018323acc030e6437d00de](https://github.com/LachezaraLaz/fixerCapstone/commit/b312ea2b1b43327be5018323acc030e6437d00de)
- [fixerClient/src/NavBarComponent.test.js](https://github.com/LachezaraLaz/fixerCapstone/blob/sdk52_update/fixerClient/src/NavBarComponent.test.js)
- [professionalClient/src/screens/contractOffer/__tests__/contractOffer.test.js](https://github.com/LachezaraLaz/fixerCapstone/blob/sdk52_update/professionalClient/src/screens/contractOffer/__tests__/contractOffer.test.js)

# Project Title
A mobile app for small contracts from professionals

## Description

Fixr is an application to connect professionals like plumber and electrician to their clients in current needs. Clients post their issues on the application and professionals will see the newly posted job on the map. They will upload a quotation for the user to evaluate and then choose which professional they want to come and help them. Payment and contracts are all done through Fixr to help all users.

## Equity and Diversity
At Fixr, our commitment is building an all inclusive platform, where a number of different people can interact with one another, people from all backgrounds, abilities, and experience.     

These individual each equally important should have equal access to high-quality, reliable services and opportunities. This is why Fixr strives to help clients and professionnels by creating an environment where regardless of age, gender, race, location, everyone can connect and benefit from local services in a safe and respectful environment.


## Getting Started for the Applications

There must be <ins>2 terminals open</ins> to make the project run. The following steps are meant to open the project wanted <br/>
### Step 1:
Duplicate the file called ".envCopy" and rename the duplicated file to ".env". In the ".env" file, the following must be entered:

```
MONGO_URL=
JWT_SECRET=
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=
GOOGLE_MAPS_KEY=
EMAIL=
PASS_RESET=
PINO_LOG_LEVEL=
BETTER_STACK_TOKEN=
STREAM_API_KEY=
STREAM_API_SECRET=
OPENAI_API_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
```
**WARNING, the ".env" file must never be pushed to main. EVER.**

<br/><br/>

Step 2 to 4 is always in the same first terminal
### Step 2:
In the first terminal enter the following command:

```
cd server
```

### Step 3:
Still in the same terminal, enter the following command:

```
npm install
```
This is to make sure that nodemon is installed for the project

### Step 4:
Enter the following command:

```
npx nodemon index.js
```
If you see that the terminal output shows: ``` Connected to MongoDB ``` then the server is now operating properly. 

<br/><br/>

Step 5 to 8 is always in the same second terminal
### Step 5:
In the second terminal enter the following command based on which project you would like to open, professional side or client side:
<br/><br/>
Client side:
```
cd fixerClient
```
<br/>

Professional side:

```
cd professionalClient
```

### Step 6:
Still in the same terminal, enter the following command:

```
npm install
```
This is to make sure that all dependencies are installed for the project
<br/><br/>

**PAUSE. DO YOU HAVE EVERYTHING NEEDED?** <br/>
At this point, we assume that you have downloaded the application called "Expo Go" on your personal device AND created a free account. <br/>
![Image 2024-11-01 at 6 12 PM](https://github.com/user-attachments/assets/c634d2fd-03f1-4f11-8bba-7e70d3a9a186)

### Step 7:
For each of the projects, there is a "ipAddress.js" file. In this file there is a single variable that must be updated to make the project work. You must enter the IP address that you are using in this variable. The file should look something like this: 

``` export const IPAddress = 'XXX.XXX.XX.XX'; ```

You must also keep in mind that your phone and computer must be using the same wifi.

### Step 8:
Enter the following command:

```
npx expo start -c
```
This will start the project and output a QR code. Scan this QR code with your phones' camera and it will direct you to the Expo Go application. You should see a loading bar at the bottom of the page. If it does not work on the first try, close the application completely and scan the QR code again. 

**Congrats! You have Fixer Open!**

## Getting Started (Admin Dashboard)

There must be <ins>2 terminals open</ins> to make the project run. The following steps are meant to open the project wanted <br/>
### Step 1:
Duplicate the file called ".envCopy" and rename the duplicated file to ".env". In the ".env" file, the following must be entered:

```
MONGO_URL=
JWT_SECRET=
PASS_RESET=
```
**WARNING, the ".env" file must never be pushed to main. EVER.**
<br/><br/>

Admin side:
```
cd Administrator
```
<br/>

<br/><br/>

Server side:
```
cd server
```
<br/>

<br/><br/>

Server side:
```
cd node index.js
```
<br/>
<br/><br/>

## Core Features


## Wiki References
- [Home](https://github.com/LachezaraLaz/fixerCapstone/wiki)
- [Diagrams](https://github.com/LachezaraLaz/fixerCapstone/wiki/Diagrams)
- [Meeting Minutes](https://github.com/LachezaraLaz/fixerCapstone/wiki/Meeting-Minutes)
- [Other Documentation](https://github.com/LachezaraLaz/fixerCapstone/wiki/Other-Documentation)
- [Personas](https://github.com/LachezaraLaz/fixerCapstone/wiki/Personas)
- [Risk](https://github.com/LachezaraLaz/fixerCapstone/wiki/Risk)
- [UI Design (Figma)](https://github.com/LachezaraLaz/fixerCapstone/wiki/UI-Design-(Figma))
- [User Stories (Simple List)](https://github.com/LachezaraLaz/fixerCapstone/wiki/User-Stories-(Simple-List))


## Contributors
<table>
  <tr>
    <th>Name</th>
    <th>Student ID</th>
    <th>GitHub Name</th>
  </tr>
  <tr>
    <td>Alexander De Luca</td>
    <td>40209204</td>
    <td><a href ="https://github.com/dlu2002">dlu2002</a></td>
  </tr>
  <tr>
    <td>Anass Sajid</td>
    <td>40158648</td>
    <td><a href="https://github.com/El-Mirrio">El-Mirrio</a></td>
  </tr>
  <tr>
    <td>Facundo Alfaro</td>
    <td>40177429</td>
    <td><a href="https://github.com/Facu-alfaro">facu-alfaro</a></td>
  </tr>
  <tr>
    <td>Karin Sarkis</td>
    <td>40189273</td>
    <td><a href="https://github.com/KarinSarkis">KarinSarkis</a></td>
  </tr>
  <tr>
    <td>Lachezara Lazarova</td>
    <td>40211033</td>
    <td><a href="https://github.com/LachezaraLaz">LachezaraLaz</a></td>
  </tr>
  <tr>
    <td>Mark Kandaleft</td>
    <td>40126013</td>
    <td><a href="https://github.com/mkandaleft">mkandaleft</a></td>
  </tr>
  <tr>
    <td>Nicola Bdewi</td>
    <td>40161428</td>
    <td><a href="https://github.com/nicola-bdewi">Nicola-Bdewi</a></td>
  </tr>
  <tr>
    <td>Samy Arab</td>
    <td>40209595</td>
    <td><a href="https://github.com/SamyArab">SamyArab</a></td>
  </tr>
  <tr>
    <td>Thaneekan Thankarajah</td>
    <td>40192306</td>
    <td><a href="https://github.com/thaneekan">thaneekan</a></td>
  </tr>
  <tr>
    <td>Ishaï Cohen</td>
    <td>40188880</td>
    <td><a href="https://github.com/L3CH3R0">L3CH3R0</a></td>
  </tr>
</table>

## Programming Languages

## Security
![image](https://github.com/user-attachments/assets/b3d33b72-08a4-4016-8a3b-79f08e4b2bfb)

#### Notification Example:

**1. User Login**
```javascript
const signinUser = async (req, res) => {
    const { email, password } = req.body;
    const user = await fixerClientObject.fixerClient.findOne({ email });
    // Verifies password, checks user roles, etc.
    const token = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET, { expiresIn: '7d' });
    res.send({ token });
};
```

**2. Token Issued**
```javascript
const token = jwt.sign({ id: user._id, email: user.email }, process.env.JWT_SECRET, { expiresIn: '7d' });
```

**3. Token Sent with Requests**
```javascript
const fetchNotifications = async () => {
    const token = await AsyncStorage.getItem('token');
    const response = await axios.get(`https://fixercapstone-production.up.railway.app/notification`, {
        headers: { Authorization: `Bearer ${token}` },
    });
};
```

**4. Token Verification on Backend**
```javascript
const authenticateJWT = (req, res, next) => {
    const token = req.headers.authorization?.split(' ')[1];
    if (!token) return res.status(401).json({ message: 'Unauthorized' });
    jwt.verify(token, process.env.JWT_SECRET, async (err, decodedToken) => {
        if (err) return res.status(403).json({ message: 'Forbidden' });
        req.user = await fixerClientObject.fixerClient.findById(decodedToken.id);
        next();
    });
};
```

**5. Accessing Protected EndPoints**
```javascript
const getNotifications = async (req, res) => {
    const notifications = await Notification.find({ userId: req.user.id }).sort({ createdAt: -1 });
    res.json({ notifications });
};
```

**6. Response Sent to Client**
```javascript
res.json({ notifications });
```


## License
The application is under the MIT License. See [LICENSE](https://github.com/LachezaraLaz/fixerCapstone/blob/f393faf9eeabf8ae4c7be99b558427e7161d3b41/LICENSE) for more details.



